<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sobi's Library</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="bg-custom-light">
    <!-- Simple Navbar with Orange Background -->
    <nav class="navbar navbar-expand-lg bg-orange">
      <div class="container">
        <a class="navbar-brand text-white" href="/">
          <i class="fas fa-book me-2"></i>Sobi's Library
        </a>
      </div>
    </nav>

    <!-- Hero Section with Blue Background -->
    <section class="hero-section text-center">
      <div class="container">
        <h1 class="display-4 mb-3">
          <i class="fas fa-book-open me-3"></i>Welcome to Sobi's Library
        </h1>
        <h2 class="fst-italic mb-3">
          "<%= quoteData.quote %>" -
          <small><%= quoteData.author %></small>
        </h2>
        <p class="lead mb-4">
          Track your reading journey with ratings and personal notes
        </p>
        <div class="d-flex flex-wrap gap-2 justify-content-center">
          <a href="/new" class="btn btn-orange btn-lg">
            <i class="fas fa-plus me-2"></i>Add Book
          </a>
          <a href="/sort/date" class="btn btn-outline-light btn-lg">
            <i class="fas fa-calendar me-2"></i>Sort by Date
          </a>
          <a href="/sort/rating" class="btn btn-outline-light btn-lg">
            <i class="fas fa-star me-2"></i>Sort by Rating
          </a>
        </div>
      </div>
    </section>

    <!-- Books Section -->
    <div class="container my-5">
      <% if (books && books.length > 0) { %>
      <div class="row g-4">
        <% books.forEach((book, index) => { %>
        <div class="col-lg-4 col-md-6">
          <div class="card h-100 card-hover shadow-sm">
            <!-- Book Cover -->
            <img
              src="<%= coverImages[index] %>"
              class="book-cover"
              alt="<%= book.title %> Cover"
            />

            <div class="card-body d-flex flex-column">
              <!-- Book Title -->
              <h5 class="card-title text-orange fw-bold"><%= book.title %></h5>

              <!-- Author -->
              <h6 class="card-subtitle mb-3 text-blue">
                <i class="fas fa-user me-1"></i><%= book.author %>
              </h6>

              <!-- Rating -->
              <div class="mb-2">
                <span class="rating-badge">
                  <i class="fas fa-star me-1"></i><%= book.rating %>/5
                </span>
              </div>

              <!-- Date Read -->
              <p class="text-muted small mb-3">
                <i class="fas fa-calendar me-1"></i>
                Read: <%= book.date_read ? new
                Date(book.date_read).toLocaleDateString() : 'Not specified' %>
              </p>

              <!-- Notes -->
              <% if (book.notes && book.notes.trim()) { %>
              <div
                class="alert alert-light border-start border-4 border-warning mb-3"
              >
                <small class="text-muted">
                  <i class="fas fa-quote-left me-1"></i>
                  <%= book.notes %>
                  <i class="fas fa-quote-right me-1"></i>
                  - <%= book.username %>
                </small>
              </div>
              <% } %>

              <!-- Action Buttons -->
              <div class="mt-auto">
                <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                  <a
                    href="/edit/<%= book.isbn %>"
                    class="btn btn-blue btn-sm flex-fill"
                  >
                    <i class="fas fa-edit me-1"></i>Edit
                  </a>
                  <a
                    href="/delete/<%= book.isbn %>"
                    class="btn btn-danger btn-sm flex-fill"
                    onclick="return confirm('Delete this book?')"
                  >
                    <i class="fas fa-trash me-1"></i>Delete
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <% }); %>
      </div>
      <% } else { %>
      <!-- Empty State -->
      <div class="text-center py-5">
        <i class="fas fa-book-open display-1 text-orange mb-3"></i>
        <h3 class="text-muted">No books yet!</h3>
        <p class="text-muted mb-4">Start building your library</p>
        <a href="/new" class="btn btn-orange btn-lg">
          <i class="fas fa-plus me-2"></i>Add Your First Book
        </a>
      </div>
      <% } %>
    </div>

    <!-- Simple Footer -->
    <footer class="bg-white text-center py-4 mt-5">
      <div class="container">
        <p class="text-muted mb-0">
          <i class="fas fa-heart text-orange me-1"></i>
          Happy Reading!
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
