<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Edit Book - Sobi's Library</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="bg-custom-light">
    <!-- Simple Navbar -->
    <nav class="navbar navbar-expand-lg bg-orange">
      <div class="container">
        <a class="navbar-brand text-white" href="/">
          <i class="fas fa-book me-2"></i>Sobi's Library
        </a>
      </div>
    </nav>

    <!-- Form Container -->
    <div class="container my-5">
      <div class="form-container">
        <h2 class="text-center text-orange mb-4">
          <i class="fas fa-edit me-2"></i>Edit Book
        </h2>
        
        <form action="/edit/<%= book.isbn %>" method="POST">
          <!-- Book Details Row -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label fw-bold">
                <i class="fas fa-barcode me-2 text-orange"></i>ISBN
              </label>
              <input type="text" class="form-control" name="isbn" 
                     value="<%= book.isbn %>" placeholder="Enter ISBN number" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label fw-bold">
                <i class="fas fa-book me-2 text-orange"></i>Title
              </label>
              <input type="text" class="form-control" name="title" 
                     value="<%= book.title %>" placeholder="Enter book title" />
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label fw-bold">
                <i class="fas fa-user-edit me-2 text-orange"></i>Author
              </label>
              <input type="text" class="form-control" name="author" 
                     value="<%= book.author %>" placeholder="Enter author name" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label fw-bold">
                <i class="fas fa-star me-2 text-orange"></i>Rating
              </label>
              <select class="form-select" name="rating">
                <option value="1" <%= book.rating == 1 ? 'selected' : '' %>>⭐ 1 - Poor</option>
                <option value="2" <%= book.rating == 2 ? 'selected' : '' %>>⭐⭐ 2 - Fair</option>
                <option value="3" <%= book.rating == 3 ? 'selected' : '' %>>⭐⭐⭐ 3 - Good</option>
                <option value="4" <%= book.rating == 4 ? 'selected' : '' %>>⭐⭐⭐⭐ 4 - Very Good</option>
                <option value="5" <%= book.rating == 5 ? 'selected' : '' %>>⭐⭐⭐⭐⭐ 5 - Excellent</option>
              </select>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">
              <i class="fas fa-calendar me-2 text-orange"></i>Date Read
            </label>
            <input
              type="date"
              class="form-control"
              name="dateRead"
              value="<%= book.date_read ? (() => {
                const date = new Date(book.date_read);
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
              })() : '' %>"
            />
          </div>

          <div class="mb-3">
            <label class="form-label fw-bold">
              <i class="fas fa-sticky-note me-2 text-orange"></i>Notes
            </label>
            <textarea class="form-control" rows="4" name="notes" 
                      placeholder="What did you think about this book?"><%= book.notes %></textarea>
          </div>

          <!-- Separator -->
          <hr class="my-4">

          <!-- Authentication Row -->
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label fw-bold">
                <i class="fas fa-user me-2 text-blue"></i>Username
              </label>
              <input type="text" class="form-control" name="username" 
                     value="<%= book.username %>" placeholder="Your username" />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label fw-bold">
                <i class="fas fa-lock me-2 text-blue"></i>Password
              </label>
              <input type="password" class="form-control" name="password" 
                     placeholder="Enter your password" />
            </div>
          </div>

          <!-- Buttons -->
          <div class="d-flex gap-3 justify-content-center mt-4">
            <a href="/" class="btn btn-secondary btn-lg">
              <i class="fas fa-times me-2"></i>Cancel
            </a>
            <button type="submit" class="btn btn-orange btn-lg">
              <i class="fas fa-save me-2"></i>Save Changes
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>